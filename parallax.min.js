/*!
 * parallax.js v1.1 (http://pixelcog.github.io/parallax.js/)
 * Copyright (c) 2014 PixelCog, Inc.
 * Licensed under MIT (https://github.com/pixelcog/parallax.js/blob/master/LICENSE)
 */
!function(a,b,c,d){function g(b,c){var e=this;"object"==typeof c&&(delete c.refresh,delete c.render,a.extend(this,c)),this.$element=a(b),!this.imageSrc&&this.$element.is("img")&&(this.imageSrc=this.$element.attr("src"));var f=(this.position+"").toLowerCase().match(/\S+/g)||[];return f.length<1&&f.push("center"),1==f.length&&f.push(f[0]),"top"==f[0]||"bottom"==f[0]||"left"==f[1]||"right"==f[1]?(e.positionX=f[1],e.positionY=f[0]):(e.positionX=f[0],e.positionY=f[1]),this.positionX!=d&&(f[0]=this.positionX.toLowerCase()),this.positionY!=d&&(f[1]=this.positionY.toLowerCase()),"left"!=this.positionX&&"right"!=this.positionX&&(this.positionX=isNaN(parseInt(this.positionX))?"center":parseInt(this.positionX)),"top"!=this.positionY&&"bottom"!=this.positionY&&(this.positionY=isNaN(parseInt(this.positionY))?"center":parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?"":"px")+" "+this.positionY+(isNaN(this.positionY)?"":"px"),navigator.userAgent.match(/(iPod|iPhone|iPad)/)?(this.iosFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+encodeURIComponent(this.imageSrc)+")",backgroundSize:"cover",backgroundPosition:this.position}),this):(this.$mirror=a("<div />").prependTo("body"),this.$slider=a("<img />").prependTo(this.$mirror),this.$textContent=a(this.innerHtml).prependTo(this.$mirror),this.$mirror.addClass("parallax-mirror").css({visibility:"hidden",zIndex:this.zIndex,position:"fixed",top:0,left:0,overflow:"hidden"}),this.$slider.addClass("parallax-slider").one("load",function(){e.naturalHeight&&e.naturalWidth||(e.naturalHeight=this.naturalHeight||this.height||1,e.naturalWidth=this.naturalWidth||this.width||1),e.aspectRatio=e.naturalWidth/e.naturalHeight,g.isSetup||g.setup(),g.sliders.push(e),g.isFresh=!1,g.requestRender()}),this.$slider[0].src=this.imageSrc,(this.naturalHeight&&this.naturalWidth||this.$slider[0].complete)&&this.$slider.trigger("load"),void 0)}function h(d){return this.each(function(){var e=a(this),f="object"==typeof d&&d;this==b||this==c||e.is("body")?g.configure(f):e.data("px.parallax")||(f=a.extend({},e.data(),f),f.innerHtml=e.html(),e.data("px.parallax",new g(this,f))),"string"==typeof d&&g[d]()})}!function(){for(var a=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!b.requestAnimationFrame;++d)b.requestAnimationFrame=b[c[d]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[c[d]+"CancelAnimationFrame"]||b[c[d]+"CancelRequestAnimationFrame"];b.requestAnimationFrame||(b.requestAnimationFrame=function(c){var e=(new Date).getTime(),f=Math.max(0,16-(e-a)),g=b.setTimeout(function(){c(e+f)},f);return a=e+f,g}),b.cancelAnimationFrame||(b.cancelAnimationFrame=function(a){clearTimeout(a)})}(),a("body");var f=a(b);a.extend(g.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,position:"center",refresh:function(){this.boxWidth=this.$element.width(),this.boxHeight=this.$element.height()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var a=0,b=g.winHeight,c=0|b-(b-this.boxHeight)*this.speed;c*this.aspectRatio>=this.boxWidth?(this.imageWidth=0|c*this.aspectRatio,this.imageHeight=c,this.offsetBaseTop=0,a=this.imageWidth-this.boxWidth,this.offsetLeft="left"==this.positionX?0:"right"==this.positionX?-a:isNaN(this.positionX)?0|-a/2:Math.max(this.positionX,-a)):(this.imageWidth=this.boxWidth,this.imageHeight=0|this.boxWidth/this.aspectRatio,this.offsetLeft=0,a=this.imageHeight-c,this.offsetBaseTop="top"==this.positionY?0:"bottom"==this.positionY?-a:isNaN(this.positionY)?0|-a/2:Math.max(this.positionY,-a))},render:function(){var a=g.scrollTop,b=g.scrollLeft,c=a+g.winHeight;this.visibility=this.boxOffsetBottom>a&&this.boxOffsetTop<c?"visible":"hidden",this.mirrorTop=this.boxOffsetTop-a,this.mirrorLeft=this.boxOffsetLeft-b,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed),this.$mirror.css({transform:"translate3d(0px, 0px, 0px)",visibility:this.visibility,top:this.mirrorTop,left:this.mirrorLeft,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:"translate3d(0px, 0px, 0px)",position:"absolute",top:this.offsetTop,left:this.offsetLeft,height:this.imageHeight,width:this.imageWidth}),this.$textContent.css({transform:"translate3d(0px, 0px, 0px)",position:"absolute",top:this.offsetTop,left:this.offsetLeft,height:this.imageHeight,width:this.imageWidth,zIndex:99})}}),a.extend(g,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){this.isReady||(f.on("scroll.px.parallax load.px.parallax",function(){var a=g.docHeight-g.winHeight,b=g.docWidth-g.winWidth;g.scrollTop=Math.max(0,Math.min(a,f.scrollTop())),g.scrollLeft=Math.max(0,Math.min(b,f.scrollLeft())),g.requestRender()}).on("resize.px.parallax load.px.parallax",function(){g.winHeight=f.height(),g.winWidth=f.width(),g.docHeight=a(c).height(),g.docWidth=a(c).width(),g.isFresh=!1,g.requestRender()}),this.isReady=!0)},configure:function(b){"object"==typeof b&&(delete b.refresh,delete b.render,a.extend(this.prototype,b))},refresh:function(){a.each(this.sliders,function(){this.refresh()}),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),a.each(this.sliders,function(){this.render()})},requestRender:function(){var a=this;this.isBusy||(this.isBusy=!0,b.requestAnimationFrame(function(){a.render(),a.isBusy=!1}))}});var i=a.fn.parallax;a.fn.parallax=h,a.fn.parallax.Constructor=g,a.fn.parallax.noConflict=function(){return a.fn.parallax=i,this},a(c).on("ready.px.parallax.data-api",function(){a('[data-parallax="scroll"]').parallax()})}(jQuery,window,document);